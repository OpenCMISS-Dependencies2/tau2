#
# execute pC++ programs on Cray T3D: replace -pcxx_NUMPROC by -npes
#
proc exec_c90 {prog numproc param} {
  if [regexp t3d $prog] {
    regsub -- {-pcxx_NUMPROC [0-9]*} $param {} newparam
    return "$prog -npes $numproc$newparam"
  } else {
    return "$prog$param"
  }
}

#
# execute pC++ programs on Cray T3E: replace -pcxx_NUMPROC by -n
#
proc exec_t3e {prog numproc param} {
  if [regexp t3e $prog] {
    regsub -- {-pcxx_NUMPROC [0-9]*} $param {} newparam
    return "mpprun -n $numproc $prog$newparam"
  } else {
    return "$prog$param"
  }
}

#
# execute pC++ programs on Paragon: replace -pcxx_NUMPROC by -sz
#
proc exec_paragon {prog numproc param} {
  if [regexp paragon $prog] {
    regsub -- { -pcxx_NUMPROC [0-9]*} $param {} newparam
    if { $newparam == "" } {
      return "/usr/local/bin/pexec ./$prog -sz $numproc"
    } else {
      return "/usr/local/bin/pexec \\\"./$prog$newparam\\\" -sz $numproc"
    }
  } else {
    return "$prog$param"
  }
}
